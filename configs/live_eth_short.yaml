# 做空配置示例
# 在价格上涨过热时做空
# ⚠️ 测试网不支持杠杆，leverage 必须设为 1

symbol: "ETH/USDT"
timeframe: "1m"

engine:
  initial_balance: 30
  maker_fee: 0.0002
  taker_fee: 0.0005
  leverage: 3               # ⚠️ 杠杆倍数（测试网必须设为1）

data:
  source: binance
  use_testnet: false
  limit: 1000
  cache: "data/binance_testnet/btcusdt_BTC/USDT_1m_20250101_20251031.csv"

exchange:
  exchange_id: "binanceusdm"  # ccxt 交易所ID
  # api_key: "kflCxmrjxzyNuaM60yvhFTCvFZBMRzCX2hniLLfEMycGJ2j2e6OMrsOE8Gzd5H7P" # 测试网
  # secret: "Z9GOv6MoF2WQfi7iE21zkFliHzMJ1ENRtLixnvkp51lX4JA9jxsKnZ9ONak573An" # 测试网
  api_key: "YOUR_API_KEY_HERE"
  secret: "YOUR_SECRET_HERE"
  password:
  enable_rate_limit: true
  options:
    defaultType: "future"
    demo: true

live:
  poll_interval: 30
  warmup_bars: 800
  backfill_limit: 1200
  enable_trading: false     # 初次测试建议先 dry-run
  dry_run: true
  heartbeat_interval: 120

strategy:
  timeframe: "1m"
  direction: "short"        # 做空模式 (可选: "long"做多 / "short"做空 / "both"双向自适应)
  drop_single_pct: 1.0      # 单K涨幅阈值（做空时检测涨幅）
  drop_window_pct: 3.0      # 窗口涨幅阈值
  drop_window: 12
  delayed_trigger_pct: 0.6
  delayed_window_minutes: 360
  ema_fast: 21
  ema_slow: 55
  rsi_period: 14
  rsi_oversold: 25.0        # RSI超卖阈值（做多时使用）
  rsi_overbought: 75.0      # RSI超买阈值（做空时使用）
  volume_short: 5
  volume_long: 20
  volume_recover_ratio: 1.18
  volume_tick_ratio: 1.32
  volatility_window: 30
  min_signal: 82            # 信号阈值
  scale_multiplier: 0.45
  trail_step_pct: 0.3
  layers:
    # 做空时，订单价格在当前价上方
    - offset_pct: 1.0       # 当前价上方1%处挂空单
      size_ratio: 0.3
    - offset_pct: 1.8       # 当前价上方1.8%处挂空单
      size_ratio: 0.35
    - offset_pct: 2.6       # 当前价上方2.6%处挂空单
      size_ratio: 0.35
  risk:
    max_account_ratio: 0.07
    take_profit_pct: 1.1
    hard_stop_pct: 1.6
    trailing_pct: 0.5
    trailing_activation_pct: 1.1
    cooldown_minutes: 90
    max_concurrent_trades: 1
    max_hold_minutes: 600
